<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/subscribing-to-state">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Subscribing to State | Reflex</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://littensy.github.io/reflex/img/social_card.png"><meta data-rh="true" name="twitter:image" content="https://littensy.github.io/reflex/img/social_card.png"><meta data-rh="true" property="og:url" content="https://littensy.github.io/reflex/docs/guides/subscribing-to-state"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Subscribing to State | Reflex"><meta data-rh="true" name="description" content="Learn the different ways to subscribe to state changes with Reflex"><meta data-rh="true" property="og:description" content="Learn the different ways to subscribe to state changes with Reflex"><link data-rh="true" rel="icon" href="/reflex/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://littensy.github.io/reflex/docs/guides/subscribing-to-state"><link data-rh="true" rel="alternate" href="https://littensy.github.io/reflex/docs/guides/subscribing-to-state" hreflang="en"><link data-rh="true" rel="alternate" href="https://littensy.github.io/reflex/docs/guides/subscribing-to-state" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RB6KJ1M85Y-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Reflex" href="/reflex/opensearch.xml"><link rel="stylesheet" href="/reflex/assets/css/styles.c0a3f341.css">
<link rel="preload" href="/reflex/assets/js/runtime~main.4eeb8549.js" as="script">
<link rel="preload" href="/reflex/assets/js/main.edd3121e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_NAB0" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reflex/"><div class="navbar__logo"><img src="/reflex/img/logo.svg" alt="Reflex Logo" class="themedImage_Zodd themedImage--light_OQxR"><img src="/reflex/img/logo.svg" alt="Reflex Logo" class="themedImage_Zodd themedImage--dark_HCKq"></div><b class="navbar__title text--truncate">Reflex</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reflex/docs/">Learn</a><a class="navbar__item navbar__link" href="/reflex/docs/reference/reflex/">Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/littensy/reflex" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_HVLo colorModeToggle_MPlM"><button class="clean-btn toggleButton_WxxZ toggleButtonDisabled_kXev" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_HsUt"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Mqoj"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ypbp"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_jX_Q docsWrapper_BTzr"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_W55J" type="button"></button><div class="docPage_ecK0"><aside class="theme-doc-sidebar-container docSidebarContainer_QPD9"><div class="sidebarViewport_cDNc"><div class="sidebar_xx1V"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_VvSw"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/reflex/docs/">Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/reflex/docs/guides/">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reflex/docs/guides/your-first-producer">Your First Producer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reflex/docs/guides/organizing-producers">Organizing Producers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reflex/docs/guides/using-selectors">Using Selectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reflex/docs/guides/subscribing-to-state">Subscribing to State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reflex/docs/guides/observers-and-entities">Observers and Entities</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/reflex/docs/guides/roact-reflex/">Roact Reflex</a><button aria-label="Toggle the collapsible sidebar category &#x27;Roact Reflex&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/reflex/docs/advanced-guides/">Advanced Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_YVPj"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_jO8Q"><div class="docItemContainer_MLiI"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_xYkp" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/reflex/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_flTW"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/reflex/docs/guides/"><span itemprop="name">Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Subscribing to State</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_P4c9 theme-doc-toc-mobile tocMobile_tWXV"><button type="button" class="clean-btn tocCollapsibleButton_WWnv">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Subscribing to State</h1><p>On <a href="/reflex/docs/guides/using-selectors">Using Selectors</a>, we learned how to use selectors to read and subscribe to state from the store. Reflex provides a few more useful ways to subscribe to state changes with selectors.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_pbkD"><div class="admonitionHeading_GpQE"><span class="admonitionIcon_QGX8"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>what you&#x27;ll learn</div><div class="admonitionContent_Y2o7"><ul><li>🌎 Common use cases for subscribing to state</li><li>🔌 Different ways to subscribe to state</li><li>📚 How to use <a href="/reflex/docs/reference/reflex/producer#subscribeselector-predicate-listener"><code>subscribe</code></a>, <a href="/reflex/docs/reference/reflex/producer#onceselector-predicate-listener"><code>once</code></a>, and <a href="/reflex/docs/reference/reflex/producer#waitselector-predicate"><code>wait</code></a></li></ul></div></div><hr><h2 class="anchor anchorWithStickyNavbar_jD0q" id="player-list">Player list<a href="#player-list" class="hash-link" aria-label="Direct link to Player list" title="Direct link to Player list">​</a></h2><p>Say your state had a <code>players</code> slice that stored the health of each player in a game:</p><div class="tabs-container tabList_t2F_"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_TXTv tabs__item--active">TypeScript</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TXTv">Luau</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_rlDe"><div class="language-ts codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockTitle_tjLP">players.ts</div><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-ts codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword module" style="color:#CF222E">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createProducer </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#CF222E">from</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;@rbxts/reflex&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#116329">PlayersState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">readonly</span><span class="token plain"> entities</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">readonly</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token maybe-class-name">PlayerEntity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword module" style="color:#CF222E">export</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#116329">PlayerEntity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">readonly</span><span class="token plain"> health</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> initialState</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token maybe-class-name">PlayersState</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    players</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword module" style="color:#CF222E">export</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> playersSlice </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">createProducer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token function-variable function" style="color:#8250DF">addPlayer</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token spread operator" style="color:#D73A49">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        players</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#D73A49">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">players</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> health</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token function-variable function" style="color:#8250DF">setPlayerHealth</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> health</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token spread operator" style="color:#D73A49">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        players</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#D73A49">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">players</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> health </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_rlDe" hidden=""><div class="language-lua codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockTitle_tjLP">players.lua</div><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-lua codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> Reflex </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ReplicatedStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Packages</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reflex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">export type PlayersState </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    entities</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PlayerEntity </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">export type PlayersActions </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    addPlayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">-</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    setPlayerHealth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> health</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">-</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">export type PlayerEntity </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    health</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> initialState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PlayersState </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    entities </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> playersSlice </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> Reflex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">createProducer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    addPlayer </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> nextState </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">clone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> nextEntities </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">clone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entities</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        nextEntities</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> health </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        nextState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entities </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> nextEntities</span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> nextState</span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    setPlayerHealth </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> health</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> nextState </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">clone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> nextEntities </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">clone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entities</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        nextEntities</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> health </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> health </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        nextState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entities </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> nextEntities</span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> nextState</span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> playersSlice </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> playersSlice </span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>The root state has a <code>players</code> slice with an <code>entities</code> field that contains your player entities. You will often need to run side effects for changes to state when working with entities. For example, you may want to play a sound when a player&#x27;s health decreases.</p><h3 class="anchor anchorWithStickyNavbar_jD0q" id="conditional-side-effects">Conditional side effects<a href="#conditional-side-effects" class="hash-link" aria-label="Direct link to Conditional side effects" title="Direct link to Conditional side effects">​</a></h3><p>You can use <a href="/reflex/docs/reference/reflex/producer#subscribeselector-predicate-listener"><code>subscribe</code></a> to run side effects when a selector&#x27;s value changes. In this example, we subscribe to the health of <code>Player1</code> and play a sound when their health decreases:</p><div class="tabs-container tabList_t2F_"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_TXTv tabs__item--active">TypeScript</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TXTv">Luau</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_rlDe"><div class="language-ts codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-ts codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword module" style="color:#CF222E">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">RootState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> producer </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#CF222E">from</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;./producer&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#8250DF">selectPlayerHealthById</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token maybe-class-name">RootState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#CF222E">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">players</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">health</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> selectHealth </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">selectPlayerHealthById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Player1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#8250DF">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lastHealth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#CF222E">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> lastHealth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token comment" style="color:#808080;font-style:normal">// Play sound</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_rlDe" hidden=""><div class="language-lua codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-lua codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> producer </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">selectPlayerHealthById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RootState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">players</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entities</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">health</span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> selectHealth </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">selectPlayerHealthById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Player1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#8250DF">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lastHealth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> health </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> lastHealth </span><span class="token keyword" style="color:#CF222E">then</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        </span><span class="token comment" style="color:#808080;font-style:normal">-- Play sound</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">end</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>There are a few things to note about this example:</p><ul><li><strong>We defined <code>selectPlayerHealthById</code>,</strong> a <a href="/reflex/docs/guides/using-selectors#passing-arguments-to-selectors">selector factory</a>, to create a simple selector that returns the health of a player with a given ID.</li><li><strong>Our selector isn&#x27;t <a href="/reflex/docs/guides/using-selectors#transforming-state">memoized</a>,</strong> but that&#x27;s okay. It&#x27;s not a problem since it&#x27;s fast and returns a value directly from the state.</li><li>Our subscription callback receives the <strong>current value</strong> and the <strong>last value</strong> that the listener received. This is useful for comparing values and running conditional side effects.</li></ul><p>As a shorthand, you can pass a <code>predicate</code> argument to <code>subscribe</code> to only run the listener when the predicate returns <code>true</code>. In this case, we can use it to only run the listener if the player&#x27;s health is lower than the last health:</p><div class="tabs-container tabList_t2F_"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_TXTv tabs__item--active">TypeScript</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TXTv">Luau</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_rlDe"><div class="language-ts codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-ts codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#8250DF">didDecrease</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> previous</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#CF222E">return</span><span class="token plain"> current </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> previous</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#8250DF">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> didDecrease</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lastHealth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token comment" style="color:#808080;font-style:normal">// Play sound</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_rlDe" hidden=""><div class="language-lua codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-lua codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">didDecrease</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> previous</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> current </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> previous</span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#8250DF">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> didDecrease</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lastHealth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token comment" style="color:#808080;font-style:normal">-- Play sound</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">end</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_jD0q" id="one-time-side-effects">One-time side effects<a href="#one-time-side-effects" class="hash-link" aria-label="Direct link to One-time side effects" title="Direct link to One-time side effects">​</a></h3><p>You can use <a href="/reflex/docs/reference/reflex/producer#onceselector-predicate-listener"><code>once</code></a> to only run a listener the next time a value changes. If you want to end the game once the player&#x27;s health reaches <code>0</code>, you can use <code>once</code>:</p><div class="tabs-container tabList_t2F_"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_TXTv tabs__item--active">TypeScript</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TXTv">Luau</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_rlDe"><div class="language-ts codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-ts codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#8250DF">isDead</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#CF222E">return</span><span class="token plain"> health </span><span class="token operator" style="color:#D73A49">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#8250DF">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isDead</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token comment" style="color:#808080;font-style:normal">// End game</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_rlDe" hidden=""><div class="language-lua codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-lua codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">local</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">isDead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> health </span><span class="token operator" style="color:#D73A49">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#8250DF">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isDead</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token comment" style="color:#808080;font-style:normal">-- End game</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">end</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Once the player&#x27;s health reaches <code>0</code>, the listener will be disconnected and the game will end.</p><h3 class="anchor anchorWithStickyNavbar_jD0q" id="async-side-effects">Async side effects<a href="#async-side-effects" class="hash-link" aria-label="Direct link to Async side effects" title="Direct link to Async side effects">​</a></h3><p>You can also use <a href="/reflex/docs/reference/reflex/producer#waitselector-predicate"><code>wait</code></a>, which returns a Promise that resolves with the new value. This is especially useful for running side effects in async functions:</p><div class="tabs-container tabList_t2F_"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_TXTv tabs__item--active">TypeScript</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_TXTv">Luau</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_rlDe"><div class="language-ts codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-ts codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">async</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">function</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">startGame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#8250DF">setGameStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;started&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#CF222E">return</span><span class="token plain"> producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#8250DF">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isDead</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#8250DF">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#D73A49">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#8250DF">setGameStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;finished&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_rlDe" hidden=""><div class="language-lua codeBlockContainer_qKi4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#ffffff"><div class="codeBlockContent_eGfQ"><pre tabindex="0" class="prism-code language-lua codeBlock_Id3g thin-scrollbar"><code class="codeBlockLines_UQKu codeBlockLinesWithNumbering_ygxi"><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token keyword" style="color:#CF222E">function</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">startGame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">setGameStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;started&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> producer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#8250DF">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectHealth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isDead</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#8250DF">andThen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">        producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">setGameStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;finished&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iNdf" style="color:#393A34"><span class="codeLineNumber_E1Rq"></span><span class="codeLineContent_qC2S"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">end</span></span><br></span></code></pre><div class="buttonGroup_FwZQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zn7T" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Puu5"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_K6gp"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>This uses <a href="/reflex/docs/reference/reflex/producer#waitselector-predicate"><code>wait</code></a> to determine when to end the game, and can be chained off of to start the next game. You can apply the same logic to other side effects, like ending multiplayer matches or showing a game over screen.</p><h3 class="anchor anchorWithStickyNavbar_jD0q" id="observing-individual-players">Observing individual players<a href="#observing-individual-players" class="hash-link" aria-label="Direct link to Observing individual players" title="Direct link to Observing individual players">​</a></h3><p>You learned how to run side effects for <em>one</em> player, but what if you want to run individual side effects for <em>each</em> player? We will learn how to use <a href="/reflex/docs/reference/reflex/producer#observeselector-discriminator-observer"><code>observe</code></a> in the next section.</p><hr><h2 class="anchor anchorWithStickyNavbar_jD0q" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><ul><li>You can create <strong>conditional side effects</strong> by passing a <code>predicate</code> function.</li><li><a href="/reflex/docs/reference/reflex/producer#subscribeselector-predicate-listener"><code>subscribe</code></a> runs a listener when a selector&#x27;s value changes.</li><li><a href="/reflex/docs/reference/reflex/producer#onceselector-predicate-listener"><code>once</code></a> runs a listener the next time a selector&#x27;s value changes, then disconnects.</li><li><a href="/reflex/docs/reference/reflex/producer#waitselector-predicate"><code>wait</code></a> returns a Promise that resolves with the next value of a selector.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/reflex/docs/guides/using-selectors"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using Selectors</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reflex/docs/guides/observers-and-entities"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Observers and Entities</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_iSsM thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#player-list" class="table-of-contents__link toc-highlight">Player list</a><ul><li><a href="#conditional-side-effects" class="table-of-contents__link toc-highlight">Conditional side effects</a></li><li><a href="#one-time-side-effects" class="table-of-contents__link toc-highlight">One-time side effects</a></li><li><a href="#async-side-effects" class="table-of-contents__link toc-highlight">Async side effects</a></li><li><a href="#observing-individual-players" class="table-of-contents__link toc-highlight">Observing individual players</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/reflex/docs">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/reflex/docs/quick-start/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/reflex/docs/guides">Guides</a></li></ul></div><div class="col footer__col"><div class="footer__title">API Reference</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/reflex/docs/reference/reflex">Reflex API</a></li><li class="footer__item"><a class="footer__link-item" href="/reflex/docs/reference/roact-reflex">Roact Reflex API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.roblox-ts.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roblox-TS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_yhlY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/Bcyh8kmRYe" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roblox OSS Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_yhlY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/littensy/reflex" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_yhlY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Richard L</div></div></div></footer></div>
<script src="/reflex/assets/js/runtime~main.4eeb8549.js"></script>
<script src="/reflex/assets/js/main.edd3121e.js"></script>
</body>
</html>