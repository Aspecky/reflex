"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[530],{9613:(e,t,o)=>{o.d(t,{Zo:()=>l,kt:()=>h});var r=o(9496);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var u=r.createContext({}),c=function(e){var t=r.useContext(u),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},l=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=c(o),m=n,h=p["".concat(u,".").concat(m)]||p[m]||d[m]||a;return o?r.createElement(h,i(i({ref:t},l),{},{components:o})):r.createElement(h,i({ref:t},l))}));function h(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=m;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[p]="string"==typeof e?e:n,i[1]=s;for(var c=2;c<a;c++)i[c]=o[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}m.displayName="MDXCreateElement"},5372:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var r=o(8028),n=(o(9496),o(9613));const a={description:"Learn how to use the useProducer hook to dispatch actions."},i="Using the Producer",s={unversionedId:"guides/roact-reflex/using-the-producer",id:"guides/roact-reflex/using-the-producer",title:"Using the Producer",description:"Learn how to use the useProducer hook to dispatch actions.",source:"@site/docs/guides/roact-reflex/using-the-producer.md",sourceDirName:"guides/roact-reflex",slug:"/guides/roact-reflex/using-the-producer",permalink:"/reflex/docs/guides/roact-reflex/using-the-producer",draft:!1,tags:[],version:"current",frontMatter:{description:"Learn how to use the useProducer hook to dispatch actions."},sidebar:"learnSidebar",previous:{title:"Roact Reflex",permalink:"/reflex/docs/guides/roact-reflex/"},next:{title:"Selecting State",permalink:"/reflex/docs/guides/roact-reflex/selecting-state"}},u={},c=[{value:"Setting up Roact Reflex",id:"setting-up-roact-reflex",level:2},{value:"Dispatching actions",id:"dispatching-actions",level:2},{value:"Typed <code>useProducer</code> hook",id:"typed-useproducer-hook",level:2},{value:"Why use a hook instead of importing the producer?",id:"why-use-a-hook-instead-of-importing-the-producer",level:2},{value:"Subscribing to state",id:"subscribing-to-state",level:2},{value:"Summary",id:"summary",level:2}],l={toc:c},p="wrapper";function d(e){let{components:t,...o}=e;return(0,n.kt)(p,(0,r.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"using-the-producer"},"Using the Producer"),(0,n.kt)("p",null,"Roact Reflex provides useful hooks similar to ",(0,n.kt)("a",{parentName:"p",href:"https://react-redux.js.org/"},"React Redux")," that allow you to access the root producer, its state, and to dispatch actions."),(0,n.kt)("admonition",{title:"what you'll learn",type:"note"},(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},"\ud83d\udcc2 How to set up Roact Reflex in your app"),(0,n.kt)("li",{parentName:"ul"},"\u26a1\ufe0f How to dispatch actions"),(0,n.kt)("li",{parentName:"ul"},"\ud83d\udce6 How to use a typed ",(0,n.kt)("inlineCode",{parentName:"li"},"useProducer")," hook"))),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"setting-up-roact-reflex"},"Setting up Roact Reflex"),(0,n.kt)("p",null,"To use Roact Reflex, you must first pass your ",(0,n.kt)("a",{parentName:"p",href:"../organizing-producers#the-root-producer"},"root producer")," to the ",(0,n.kt)("a",{parentName:"p",href:"docs/reference/roact-reflex/reflex-provider"},(0,n.kt)("inlineCode",{parentName:"a"},"<ReflexProvider>"))," component. By doing this, you enable Reflex Hooks for your Roact app."),(0,n.kt)("p",null,"You can render the ",(0,n.kt)("inlineCode",{parentName:"p"},"<ReflexProvider>")," component anywhere in your app, but it must be rendered above any components that use the Hooks. We recommend putting it at the top-level of your app, wrapping your root components."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-tsx"},"Roact.mount(\n    // highlight-start\n    <ReflexProvider producer={producer}>\n        <App />\n    </ReflexProvider>,\n    // highlight-end\n    playerGui,\n);\n")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"dispatching-actions"},"Dispatching actions"),(0,n.kt)("p",null,"The ",(0,n.kt)("a",{parentName:"p",href:"docs/reference/roact-reflex/use-producer"},(0,n.kt)("inlineCode",{parentName:"a"},"useProducer"))," hook lets you access the producer and dispatch actions to the root producer. You can use this hook to dispatch actions from any component that is wrapped in a ",(0,n.kt)("a",{parentName:"p",href:"docs/reference/roact-reflex/reflex-provider"},(0,n.kt)("inlineCode",{parentName:"a"},"<ReflexProvider>")),"."),(0,n.kt)("p",null,"Say our root producer has a ",(0,n.kt)("inlineCode",{parentName:"p"},"todos")," slice that contains actions to add a todo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="todos.ts" showLineNumbers',title:'"todos.ts"',showLineNumbers:!0},'import { createProducer } from "@rbxts/reflex";\n\ninterface TodosState {\n    readonly list: readonly string[];\n}\n\nconst initialState: TodosState = {\n    list: [],\n};\n\nexport const todosSlice = createProducer(initialState, {\n    addTodo: (state, todo: string) => ({\n        ...state,\n        list: [...state.list, todo],\n    }),\n});\n')),(0,n.kt)("p",null,"We can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"useProducer")," hook to dispatch the ",(0,n.kt)("inlineCode",{parentName:"p"},"addTodo")," action from a component:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="Button.tsx" showLineNumbers',title:'"Button.tsx"',showLineNumbers:!0},'import Roact from "@rbxts/roact";\nimport { useProducer } from "@rbxts/roact-reflex";\nimport { RootProducer } from "./producer";\n\nfunction Button() {\n    // highlight-next-line\n    const producer = useProducer<RootProducer>();\n\n    return (\n        <textbutton\n            Text="Add Todo"\n            Size={new UDim2(0, 100, 0, 50)}\n            Event={{\n                // highlight-next-line\n                Activated: () => producer.addTodo("Hello, world!"),\n            }}\n        />\n    );\n}\n')),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"You can also ",(0,n.kt)("em",{parentName:"p"},"destructure")," the ",(0,n.kt)("inlineCode",{parentName:"p"},"useProducer")," hook to get the ",(0,n.kt)("inlineCode",{parentName:"p"},"addTodo")," action directly:"),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="Button.tsx"',title:'"Button.tsx"'},"function Button() {\n    const { addTodo } = useProducer<RootProducer>();\n    // ...\n"))),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"typed-useproducer-hook"},"Typed ",(0,n.kt)("inlineCode",{parentName:"h2"},"useProducer")," hook"),(0,n.kt)("p",null,"If you want to use the ",(0,n.kt)("a",{parentName:"p",href:"docs/reference/roact-reflex/use-producer"},(0,n.kt)("inlineCode",{parentName:"a"},"useProducer"))," hook without passing the type of your root producer, you can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"UseProducerHook")," type to create a typed hook:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},'import { UseProducerHook, useProducer } from "@rbxts/roact-reflex";\nimport { RootProducer } from "./producer";\n\nexport const useRootProducer: UseProducerHook<RootProducer> = useProducer;\n')),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"why-use-a-hook-instead-of-importing-the-producer"},"Why use a hook instead of importing the producer?"),(0,n.kt)("p",null,"You may be wondering why we use a hook to access the producer instead of just importing it directly. Some good reasons to use a hook are:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"It makes your components more ",(0,n.kt)("strong",{parentName:"li"},"reusable")),(0,n.kt)("li",{parentName:"ol"},"It allows you more ",(0,n.kt)("strong",{parentName:"li"},"flexibility")," in testing"),(0,n.kt)("li",{parentName:"ol"},"Your components are easier to test in ",(0,n.kt)("strong",{parentName:"li"},"isolation"))),(0,n.kt)("p",null,"If you use a ",(0,n.kt)("a",{parentName:"p",href:"docs/reference/roact-reflex/reflex-provider"},(0,n.kt)("inlineCode",{parentName:"a"},"ReflexProvider"))," to pass the root producer, you can create a mock producer and pass it to your components in tests. Your components can be easier to isolate and run tests on."),(0,n.kt)("p",null,"Using a hook also makes your components more reusable. If you import the producer directly, you might need to refactor your component when moving it to a different app that has a different producer set up."),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://redux.js.org/faq/store-setup#can-or-should-i-create-multiple-stores-can-i-import-my-store-directly-and-use-it-in-components-myself"},"Read more on Redux's FAQ \u2192")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"subscribing-to-state"},"Subscribing to state"),(0,n.kt)("p",null,"To learn how to subscribe to state, we'll learn about the ",(0,n.kt)("a",{parentName:"p",href:"docs/reference/roact-reflex/use-selector"},(0,n.kt)("inlineCode",{parentName:"a"},"useSelector"))," hook on the next page."),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"summary"},"Summary"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Make sure to pass your root producer to the ",(0,n.kt)("a",{parentName:"li",href:"docs/reference/roact-reflex/reflex-provider"},(0,n.kt)("inlineCode",{parentName:"a"},"<ReflexProvider>"))," component"),(0,n.kt)("li",{parentName:"ul"},"You can use the ",(0,n.kt)("a",{parentName:"li",href:"docs/reference/roact-reflex/use-producer"},(0,n.kt)("inlineCode",{parentName:"a"},"useProducer"))," hook to access the root producer and dispatch actions"),(0,n.kt)("li",{parentName:"ul"},"Using a hook to access the producer makes your components more reusable and easier to test")))}d.isMDXComponent=!0}}]);